# 应用设计

# User

没啥说的, 存着就行.

```rust
struct Vector2 {
   x: f32,
   y: f32,
}

struct User {
   // id: u64,
    position: Vector2,
    velocity: Vector2,
    money: u64,
    is_online: bool,
    update_timestamp: Option<u128>,
}

struct Users {
    update_timestamp: u128,
    inner: HashMap<u64, User>,
}
```

## login

> 登录, 无用户则创建, position随机, 其他为0, 无返回值

```rust
fn login(&mut self, uid: u64) {
    self.inner.entry(uid).or_default();
}
```

## logout

> 登出, 设置velocity为0, is_online为false

```rust
fn logout(&mut self, uid: u64) {
    if let Some(user) = self.inner.get_mut(&u64) {
        user
    }
}
```
